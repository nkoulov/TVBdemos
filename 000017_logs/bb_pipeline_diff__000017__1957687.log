2021-08-28 13:42:14,367 - bb_pipeline_diff - INFO - Starting the subject processing: Sat Aug 28 13:42:14 2021 
2021-08-28 13:42:14,367 - bb_pipeline_diff - INFO - Subject received as input: 000017 
2021-08-28 13:42:14,367 - bb_pipeline_diff - INFO - COMMAND TO RUN: 	$BB_BIN_DIR/bb_diffusion_pipeline/bb_eddy/bb_pre_eddy 000017 
2021-08-28 13:42:14,388 - bb_pipeline_diff - INFO - COMMAND OUTPUT: 	+ direc=/home/yxw190015/HSAM/000017
+ mkdir -p /home/yxw190015/HSAM/000017/dMRI/dMRI
+ ln -s /home/yxw190015/HSAM/000017/dMRI/raw/dwi.nii.gz /home/yxw190015/HSAM/000017/dMRI/dMRI/DWI.nii.gz
+ cp /home/yxw190015/HSAM/000017/dMRI/raw/dwi.bval /home/yxw190015/HSAM/000017/dMRI/dMRI/bvals
cp: cannot stat '/home/yxw190015/HSAM/000017/dMRI/raw/dwi.bval': No such file or directory
 
2021-08-28 13:42:14,388 - bb_pipeline_diff - INFO - COMMAND TO RUN: 	$BB_BIN_DIR/bb_diffusion_pipeline/bb_eddy/bb_eddy_wrap /home/yxw190015/HSAM/000017 
2021-08-28 13:42:14,404 - bb_pipeline_diff - INFO - COMMAND OUTPUT: 	+ baseDir=/home/yxw190015/HSAM/000017
+ eddy_cuda --imain=/home/yxw190015/HSAM/000017/dMRI/dMRI/DWI.nii.gz --mask=/home/yxw190015/HSAM/000017/dMRI/dMRI/rawDTI_B0_brain_mask.nii.gz --acqp=/home/yxw190015/HSAM/000017/dMRI/dMRI/acqparams.txt --index=/home/yxw190015/HSAM/000017/dMRI/dMRI/eddy_index.txt --bvecs=/home/yxw190015/HSAM/000017/dMRI/dMRI/bvecs --bvals=/home/yxw190015/HSAM/000017/dMRI/dMRI/bvals --out=/home/yxw190015/HSAM/000017/dMRI/dMRI/data --flm=quadratic --resamp=jac --slm=linear --fwhm=2 --ff=5 --sep_offs_move --nvoxhp=1000 --repol --rms --cnr_maps -v
/home/yxw190015/tvb-pipeline2/tvb-ukbb/bb_diffusion_pipeline/bb_eddy/bb_eddy_wrap: line 31: eddy_cuda: command not found
 
2021-08-28 13:42:14,405 - bb_pipeline_diff - INFO - COMMAND TO RUN: 	$BB_BIN_DIR/bb_diffusion_pipeline/bb_eddy/bb_post_eddy /home/yxw190015/HSAM/000017 
2021-08-28 13:42:15,822 - bb_pipeline_diff - INFO - COMMAND OUTPUT: 	+ baseDir=/home/yxw190015/HSAM/000017
+ /opt/ohpc/pub/unpackaged/apps/fslbinary/6.0.4/bin/fslroi /home/yxw190015/HSAM/000017/dMRI/dMRI/data.nii.gz /home/yxw190015/HSAM/000017/dMRI/dMRI/data_B0.nii.gz 0 1
Image Exception : #63 :: No image files match: /home/yxw190015/HSAM/000017/dMRI/dMRI/data
No image files match: /home/yxw190015/HSAM/000017/dMRI/dMRI/data
+ /home/yxw190015/tvb-pipeline2/tvb-ukbb/bb_structural_pipeline/bb_epi_reg --epi=/home/yxw190015/HSAM/000017/dMRI/dMRI/data_B0.nii.gz --t1=/home/yxw190015/HSAM/000017/T1/T1.nii.gz --t1brain=/home/yxw190015/HSAM/000017/T1/T1_brain.nii.gz --out=/home/yxw190015/HSAM/000017/dMRI/dMRI/transforms/DTI_to_T1 --wmseg=/home/yxw190015/HSAM/000017/T1/T1_fast/T1_brain_WM_mask.nii.gz
cp: cannot create regular file '/home/yxw190015/HSAM/000017/dMRI/dMRI/transforms/DTI_to_T1_fast_wmseg.nii.gz': No such file or directory
Image Exception : #63 :: No image files match: /home/yxw190015/HSAM/000017/dMRI/dMRI/transforms/DTI_to_T1_fast_wmseg
terminate called after throwing an instance of 'std::runtime_error'
  what():  No image files match: /home/yxw190015/HSAM/000017/dMRI/dMRI/transforms/DTI_to_T1_fast_wmseg
/home/yxw190015/tvb-pipeline2/tvb-ukbb/bb_structural_pipeline/bb_epi_reg: line 265: 1972086 Aborted                 (core dumped) $FSLDIR/bin/fslmaths ${vout}_fast_wmseg -edge -bin -mas ${vout}_fast_wmseg ${vout}_fast_wmedge
Image Exception : #63 :: No image files match: /home/yxw190015/HSAM/000017/dMRI/dMRI/data_B0
Image Exception : #22 :: Failed to read volume /home/yxw190015/HSAM/000017/dMRI/dMRI/data_B0
Error : No image files match: /home/yxw190015/HSAM/000017/dMRI/dMRI/data_B0
Failed to read volume /home/yxw190015/HSAM/000017/dMRI/dMRI/data_B0
Error : No image files match: /home/yxw190015/HSAM/000017/dMRI/dMRI/data_B0
Image Exception : #63 :: No image files match: /home/yxw190015/HSAM/000017/dMRI/dMRI/data_B0
Image Exception : #22 :: Failed to read volume /home/yxw190015/HSAM/000017/dMRI/dMRI/data_B0
Error : No image files match: /home/yxw190015/HSAM/000017/dMRI/dMRI/data_B0
Failed to read volume /home/yxw190015/HSAM/000017/dMRI/dMRI/data_B0
Error : No image files match: /home/yxw190015/HSAM/000017/dMRI/dMRI/data_B0
Could not open matrix file /home/yxw190015/HSAM/000017/dMRI/dMRI/transforms/DTI_to_T1.mat
Image Exception : #63 :: No image files match: /home/yxw190015/HSAM/000017/dMRI/dMRI/data_B0
Image Exception : #22 :: Failed to read volume /home/yxw190015/HSAM/000017/dMRI/dMRI/data_B0
Error : No image files match: /home/yxw190015/HSAM/000017/dMRI/dMRI/data_B0
terminate called after throwing an instance of 'std::runtime_error'
  what():  Failed to read volume /home/yxw190015/HSAM/000017/dMRI/dMRI/data_B0
Error : No image files match: /home/yxw190015/HSAM/000017/dMRI/dMRI/data_B0
/home/yxw190015/tvb-pipeline2/tvb-ukbb/bb_structural_pipeline/bb_epi_reg: line 332: 1972091 Aborted                 (core dumped) $FSLDIR/bin/applywarp -i ${vepi} -r ${vrefhead} -o ${vout} --premat=${vout}.mat --interp=spline
+ /opt/ohpc/pub/unpackaged/apps/fslbinary/6.0.4/bin/convert_xfm -omat /home/yxw190015/HSAM/000017/dMRI/dMRI/transforms/T1_to_DTI.mat -inverse /home/yxw190015/HSAM/000017/dMRI/dMRI/transforms/DTI_to_T1.mat
Could not open matrix file /home/yxw190015/HSAM/000017/dMRI/dMRI/transforms/DTI_to_T1.mat
Cannot read input-matrix
 
2021-08-28 13:42:15,822 - bb_pipeline_diff - INFO - COMMAND TO RUN: 	${FSLDIR}/bin/dtifit -k /home/yxw190015/HSAM/000017/dMRI/dMRI/data_1_shell -m /home/yxw190015/HSAM/000017/dMRI/dMRI/nodif_brain_mask -r /home/yxw190015/HSAM/000017/dMRI/dMRI/data_1_shell.bvec -b /home/yxw190015/HSAM/000017/dMRI/dMRI/data_1_shell.bval -o /home/yxw190015/HSAM/000017/dMRI/dMRI/dti 
2021-08-28 13:42:16,348 - bb_pipeline_diff - INFO - COMMAND OUTPUT: 	Could not open matrix file /home/yxw190015/HSAM/000017/dMRI/dMRI/data_1_shell.bvec
Could not open matrix file /home/yxw190015/HSAM/000017/dMRI/dMRI/data_1_shell.bval
Image Exception : #63 :: No image files match: /home/yxw190015/HSAM/000017/dMRI/dMRI/data_1_shell
Image Exception : #22 :: Failed to read volume /home/yxw190015/HSAM/000017/dMRI/dMRI/data_1_shell
Error : No image files match: /home/yxw190015/HSAM/000017/dMRI/dMRI/data_1_shell
terminate called after throwing an instance of 'std::runtime_error'
  what():  Failed to read volume /home/yxw190015/HSAM/000017/dMRI/dMRI/data_1_shell
Error : No image files match: /home/yxw190015/HSAM/000017/dMRI/dMRI/data_1_shell
 
2021-08-28 13:42:16,348 - bb_pipeline_diff - INFO - COMMAND TO RUN: 	$BB_BIN_DIR/bb_diffusion_pipeline/bb_tbss/bb_tbss_general 000017 
2021-08-28 13:42:16,388 - bb_pipeline_diff - INFO - COMMAND OUTPUT: 	+ direc=/home/yxw190015/HSAM/000017
+ TBSSDir=/home/yxw190015/HSAM/000017/dMRI/TBSS
+ mkdir /home/yxw190015/HSAM/000017/dMRI/TBSS
+ cd /home/yxw190015/HSAM/000017/dMRI/TBSS
+ ln ../dMRI/dti_FA.nii.gz dti_FA.nii.gz
ln: failed to access '../dMRI/dti_FA.nii.gz': No such file or directory
 
2021-08-28 13:42:16,388 - bb_pipeline_diff - INFO - COMMAND TO RUN: 	$BB_BIN_DIR/bb_diffusion_pipeline/bb_bedpostx/bb_pre_bedpostx_gpu /home/yxw190015/HSAM/000017/dMRI 
2021-08-28 13:42:16,442 - bb_pipeline_diff - INFO - COMMAND OUTPUT: 	++ fsl_abspath /home/yxw190015/HSAM/000017/dMRI
+ subjdir=/home/yxw190015/HSAM/000017/dMRI
++ echo /home/yxw190015/HSAM/000017/dMRI
++ sed 's/\/$/$/g'
+ subjdir=/home/yxw190015/HSAM/000017/dMRI
+ echo ---------------------------------------------
+ echo '------------------ BedpostX -----------------'
+ echo ---------------------------------------------
+ echo subjectdir is /home/yxw190015/HSAM/000017/dMRI
+ echo Making bedpostx directory structure
+ mkdir -p /home/yxw190015/HSAM/000017/dMRI/bedpostx
+ '[' '!' -d /home/yxw190015/HSAM/000017/dMRI ']'
+ '[' '!' -e /home/yxw190015/HSAM/000017/dMRI/dMRI/bvecs ']'
+ echo '/home/yxw190015/HSAM/000017/dMRI/dMRI/bvecs not found'
+ touch /home/yxw190015/HSAM/000017/dMRI/pre_bedpostx_error.txt
+ exit 1
 
2021-08-28 13:42:16,442 - bb_pipeline_diff - INFO - COMMAND TO RUN: 	$BB_BIN_DIR/bb_diffusion_pipeline/bb_bedpostx/bb_bedpostx_gpu /home/yxw190015/HSAM/000017/dMRI 
2021-08-28 13:42:16,494 - bb_pipeline_diff - INFO - COMMAND OUTPUT: 	++ fsl_abspath /home/yxw190015/HSAM/000017/dMRI
+ subjdir=/home/yxw190015/HSAM/000017/dMRI
++ echo /home/yxw190015/HSAM/000017/dMRI
++ sed 's/\/$/$/g'
+ subjdir=/home/yxw190015/HSAM/000017/dMRI
+ echo subjectdir is /home/yxw190015/HSAM/000017/dMRI
+ FSLSUBALREADYRUN=false
+ echo false
+ '[' -d /home/yxw190015/HSAM/000017/dMRI ']'
+ '[' '!' -f /home/yxw190015/HSAM/000017/dMRI/pre_bedpostx_error.txt ']'
+ . /home/yxw190015/tvb-pipeline2/tvb-ukbb/bb_pipeline_tools/bb_set_footer
++ set +x
 
2021-08-28 13:42:16,494 - bb_pipeline_diff - INFO - COMMAND TO RUN: 	$BB_BIN_DIR/bb_diffusion_pipeline/bb_probtrackx2/bb_pre_probtrackx2 /home/yxw190015/HSAM/000017 
2021-08-28 13:42:17,203 - bb_pipeline_diff - INFO - COMMAND OUTPUT: 	++ fsl_abspath /home/yxw190015/HSAM/000017
+ subjdir=/home/yxw190015/HSAM/000017
++ echo /home/yxw190015/HSAM/000017
++ sed 's/\/$/$/g'
+ subjdir=/home/yxw190015/HSAM/000017
+ echo subjectdir is /home/yxw190015/HSAM/000017
+ mkdir -p /home/yxw190015/HSAM/000017/dMRI/probtrackx
+ ln -s '/home/yxw190015/HSAM/000017/dMRI/bedpostx.bedpostX/merged*' /home/yxw190015/HSAM/000017/dMRI/probtrackx
+ /opt/ohpc/pub/unpackaged/apps/fslbinary/6.0.4/bin/applywarp -i /home/yxw190015/HSAM/000017/T1/labelled_GMI -r /home/yxw190015/HSAM/000017/dMRI/dMRI/data_B0 -o /home/yxw190015/HSAM/000017/dMRI/dMRI/parcellation --premat=/home/yxw190015/HSAM/000017/dMRI/dMRI/transforms/T1_to_DTI.mat --interp=nn
Could not open matrix file /home/yxw190015/HSAM/000017/dMRI/dMRI/transforms/T1_to_DTI.mat
Image Exception : #63 :: No image files match: /home/yxw190015/HSAM/000017/dMRI/dMRI/data_B0
Image Exception : #22 :: Failed to read volume /home/yxw190015/HSAM/000017/dMRI/dMRI/data_B0
Error : No image files match: /home/yxw190015/HSAM/000017/dMRI/dMRI/data_B0
terminate called after throwing an instance of 'std::runtime_error'
  what():  Failed to read volume /home/yxw190015/HSAM/000017/dMRI/dMRI/data_B0
Error : No image files match: /home/yxw190015/HSAM/000017/dMRI/dMRI/data_B0
/home/yxw190015/tvb-pipeline2/tvb-ukbb/bb_diffusion_pipeline/bb_probtrackx2/bb_pre_probtrackx2: line 21: 1972291 Aborted                 (core dumped) ${FSLDIR}/bin/applywarp -i $subjdir/T1/labelled_GMI -r $subjdir/dMRI/dMRI/data_B0 -o $subjdir/dMRI/dMRI/parcellation --premat=$subjdir/dMRI/dMRI/transforms/T1_to_DTI.mat --interp=nn
 
2021-08-28 13:42:17,203 - bb_pipeline_diff - INFO - COMMAND TO RUN: 	$BB_BIN_DIR/bb_diffusion_pipeline/bb_probtrackx2/bb_post_probtrackx2 000017 
2021-08-28 13:42:17,491 - bb_pipeline_diff - INFO - COMMAND OUTPUT: 	+ set +e
++ fsl_abspath 000017
+ subjdir=/home/yxw190015/HSAM/000017
++ echo /home/yxw190015/HSAM/000017
++ sed 's/\/$/$/g'
+ subjdir=/home/yxw190015/HSAM/000017
+ echo subjectdir is /home/yxw190015/HSAM/000017
+ python /home/yxw190015/tvb-pipeline2/tvb-ukbb/bb_diffusion_pipeline/bb_probtrackx2/tvb_concat_probtrackx2.py /home/yxw190015/HSAM/000017
Traceback (most recent call last):
  File "/home/yxw190015/tvb-pipeline2/tvb-ukbb/bb_diffusion_pipeline/bb_probtrackx2/tvb_concat_probtrackx2.py", line 102, in <module>
    tvb_concat_probtrackx2(sys.argv[1])
  File "/home/yxw190015/tvb-pipeline2/tvb-ukbb/bb_diffusion_pipeline/bb_probtrackx2/tvb_concat_probtrackx2.py", line 36, in tvb_concat_probtrackx2
    fdt = np.loadtxt(batch_dir + "/fdt_network_matrix")
  File "/home/yxw190015/tvb-pipeline2/software/condaenv/lib/python3.7/site-packages/numpy/lib/npyio.py", line 1065, in loadtxt
    fh = np.lib._datasource.open(fname, 'rt', encoding=encoding)
  File "/home/yxw190015/tvb-pipeline2/software/condaenv/lib/python3.7/site-packages/numpy/lib/_datasource.py", line 194, in open
    return ds.open(path, mode, encoding=encoding, newline=newline)
  File "/home/yxw190015/tvb-pipeline2/software/condaenv/lib/python3.7/site-packages/numpy/lib/_datasource.py", line 531, in open
    raise IOError("%s not found." % path)
OSError: /home/yxw190015/HSAM/000017/dMRI/probtrackx/batch_1/fdt_network_matrix not found.
+ mv 'bb_probtrackx_000017.e*' /home/yxw190015/HSAM/000017/logs/.
mv: cannot stat 'bb_probtrackx_000017.e*': No such file or directory
+ mv 'bb_probtrackx*_000017.o*' /home/yxw190015/HSAM/000017/logs/.
mv: cannot stat 'bb_probtrackx*_000017.o*': No such file or directory
+ mkdir /home/yxw190015/HSAM/000017/tvb_inputs
+ cp /home/yxw190015/HSAM/000017/dMRI/sc.txt /home/yxw190015/HSAM/000017/dMRI/distance.txt /home/yxw190015/HSAM/000017/T2_FLAIR/lesions/volume.txt /home/yxw190015/HSAM/000017/tvb_inputs
cp: cannot stat '/home/yxw190015/HSAM/000017/dMRI/sc.txt': No such file or directory
cp: cannot stat '/home/yxw190015/HSAM/000017/dMRI/distance.txt': No such file or directory
cp: cannot stat '/home/yxw190015/HSAM/000017/T2_FLAIR/lesions/volume.txt': No such file or directory
+ array=()
+ IFS=
+ read -r -d ''
++ find /home/yxw190015/HSAM/000017/fMRI -maxdepth 1 -type d -name '*.ica' -print0
+ array+=("$REPLY")
+ IFS=
+ read -r -d ''
+ for t in ${array[@]}
++ basename /home/yxw190015/HSAM/000017/fMRI/rfMRI.ica
+ mkdir /home/yxw190015/HSAM/000017/tvb_inputs/rfMRI.ica
++ basename /home/yxw190015/HSAM/000017/fMRI/rfMRI.ica
+ cp /home/yxw190015/HSAM/000017/fMRI/rfMRI.ica/fc.txt /home/yxw190015/HSAM/000017/fMRI/rfMRI.ica/ts.txt /home/yxw190015/HSAM/000017/tvb_inputs/rfMRI.ica
cp: cannot stat '/home/yxw190015/HSAM/000017/fMRI/rfMRI.ica/fc.txt': No such file or directory
cp: cannot stat '/home/yxw190015/HSAM/000017/fMRI/rfMRI.ica/ts.txt': No such file or directory
+ subj=000017
+ [[ 000017 =~ /$ ]]
++ basename 000017
+ subj=000017
+ cd /home/yxw190015/HSAM/000017
+ zip -r ./000017_tvb_inputs.zip ./tvb_inputs
+ cd -
+ rm -rf /home/yxw190015/HSAM/000017/tvb_inputs
+ set -e
+ . /home/yxw190015/tvb-pipeline2/tvb-ukbb/bb_pipeline_tools/bb_set_footer
++ set +x
 
